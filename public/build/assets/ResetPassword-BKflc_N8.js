import{u as S,r as w,j as s,H as z,L as d}from"./app-Bpwa3e0P.js";import{G as k,A as _,S as E}from"./GuestLayout-B-V1slbW.js";import{S as j,B as m}from"./shield-BzTFr0no.js";import{F as a}from"./Form-CgstAcKi.js";import{E as u}from"./envelope-DKmLx5N6.js";import{I as n}from"./InputGroup-WS52NjVa.js";import{L as x}from"./lock-BXPvycWZ.js";import{E as f,a as g}from"./eye-DjiBr5Vk.js";import{P as G}from"./ProgressBar-AbnHcpYr.js";import{C as L}from"./check-circle-BOf7XbJ8.js";import"./InputGroupContext-DPLgKKNG.js";function M({token:N,email:p}){const{data:t,setData:i,post:y,processing:h,errors:r,reset:b}=S({token:N,email:p,password:"",password_confirmation:""}),[l,v]=w.useState(!1),[c,C]=w.useState(!1),P=e=>{e.preventDefault(),y(route("password.store"),{onFinish:()=>b("password","password_confirmation")})},o=(()=>{const e=t.password;return e?e.length<6?{strength:25,text:"Too short",variant:"danger"}:e.length<8?{strength:50,text:"Weak",variant:"warning"}:/[A-Z]/.test(e)&&/[0-9]/.test(e)&&/[^A-Za-z0-9]/.test(e)?{strength:100,text:"Strong",variant:"success"}:/[A-Z]/.test(e)&&/[0-9]/.test(e)?{strength:75,text:"Good",variant:"info"}:{strength:50,text:"Fair",variant:"warning"}:{strength:0,text:"No password",variant:"secondary"}})();return s.jsxs(k,{children:[s.jsx(z,{title:"Reset Password - GBV Portal"}),s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("h4",{className:"fw-bold mb-2",children:"Create New Password"}),s.jsx("p",{className:"text-secondary small",children:"Kitui County GBV Information System"})]}),s.jsxs(_,{variant:"info",className:"mb-4 small d-flex align-items-center gap-2",children:[s.jsx(j,{className:"flex-shrink-0",size:16}),s.jsxs("span",{children:[s.jsx("strong",{children:"Password Requirements:"})," Minimum 8 characters with at least one uppercase letter, one number, and one special character."]})]}),s.jsxs(a,{onSubmit:P,children:[s.jsxs(a.Group,{className:"mb-3",children:[s.jsxs(a.Label,{className:"small fw-semibold text-secondary",children:[s.jsx(u,{className:"me-1",size:12}),"Email Address"]}),s.jsxs(n,{children:[s.jsx(n.Text,{className:"bg-light",children:s.jsx(u,{size:16,className:"text-secondary"})}),s.jsx(a.Control,{type:"email",value:t.email,onChange:e=>i("email",e.target.value),placeholder:"gv.officer@kitui.go.ke",autoComplete:"username",readOnly:!!p,isInvalid:!!r.email})]}),r.email&&s.jsx(a.Text,{className:"text-danger small mt-1 d-block",children:r.email})]}),s.jsxs(a.Group,{className:"mb-3",children:[s.jsxs(a.Label,{className:"small fw-semibold text-secondary",children:[s.jsx(x,{className:"me-1",size:12}),"New Password"]}),s.jsxs(n,{children:[s.jsx(n.Text,{className:"bg-light",children:s.jsx(x,{size:16,className:"text-secondary"})}),s.jsx(a.Control,{type:l?"text":"password",value:t.password,onChange:e=>i("password",e.target.value),placeholder:"Enter new password",autoComplete:"new-password",autoFocus:!0,isInvalid:!!r.password}),s.jsx(m,{variant:"outline-secondary",onClick:()=>v(!l),children:l?s.jsx(f,{size:16}):s.jsx(g,{size:16})})]}),t.password&&s.jsxs("div",{className:"mt-2",children:[s.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[s.jsx(a.Text,{className:"text-secondary",children:"Password strength:"}),s.jsx(a.Text,{className:`text-${o.variant} fw-semibold`,children:o.text})]}),s.jsx(G,{now:o.strength,variant:o.variant,style:{height:"4px"}})]}),r.password&&s.jsx(a.Text,{className:"text-danger small mt-1 d-block",children:r.password})]}),s.jsxs(a.Group,{className:"mb-4",children:[s.jsxs(a.Label,{className:"small fw-semibold text-secondary",children:[s.jsx(L,{className:"me-1",size:12}),"Confirm New Password"]}),s.jsxs(n,{children:[s.jsx(n.Text,{className:"bg-light",children:s.jsx(x,{size:16,className:"text-secondary"})}),s.jsx(a.Control,{type:c?"text":"password",value:t.password_confirmation,onChange:e=>i("password_confirmation",e.target.value),placeholder:"Confirm new password",autoComplete:"new-password",isInvalid:!!r.password_confirmation}),s.jsx(m,{variant:"outline-secondary",onClick:()=>C(!c),children:c?s.jsx(f,{size:16}):s.jsx(g,{size:16})})]}),r.password_confirmation&&s.jsx(a.Text,{className:"text-danger small mt-1 d-block",children:r.password_confirmation}),t.password&&t.password_confirmation&&s.jsx("div",{className:"mt-2 small",children:t.password===t.password_confirmation?s.jsx("span",{className:"text-success",children:"✓ Passwords match"}):s.jsx("span",{className:"text-danger",children:"✗ Passwords do not match"})})]}),s.jsx(m,{type:"submit",variant:"primary",className:"w-100 py-2 mb-3 rounded-pill fw-semibold",disabled:h,children:h?s.jsxs(s.Fragment,{children:[s.jsx(E,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-2"}),"Resetting password..."]}):s.jsxs(s.Fragment,{children:[s.jsx(j,{className:"me-2",size:16}),"Reset Password"]})}),s.jsx("div",{className:"text-center",children:s.jsx(d,{href:route("login"),className:"small text-primary text-decoration-none",children:"Return to Login"})})]}),s.jsxs("div",{className:"mt-4 pt-3 border-top text-center",children:[s.jsx("p",{className:"small text-secondary mb-2",children:"Having trouble resetting your password?"}),s.jsxs("div",{className:"d-flex justify-content-center gap-3",children:[s.jsx(d,{href:"/contact",className:"small text-primary text-decoration-none",children:"Contact Support"}),s.jsx("span",{className:"text-secondary",children:"•"}),s.jsx(d,{href:"/help",className:"small text-primary text-decoration-none",children:"Help Center"})]})]}),s.jsxs("div",{className:"d-flex align-items-center justify-content-center gap-2 mt-3",children:[s.jsx("div",{className:"bg-success rounded-circle",style:{width:"6px",height:"6px"}}),s.jsx("span",{className:"small text-secondary",children:"256-bit encrypted password reset"})]})]})}export{M as default};
